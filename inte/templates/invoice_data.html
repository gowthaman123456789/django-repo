[10:52] Gowthaman R.P
 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invoice Data</title>
    <link rel="stylesheet" href="static/invoice_data.css">
</head>
<body>
    <div class="container">
        <h1>Extracted Invoice Data</h1>
 
        <!-- Iterate over each item in extracted_data -->
        {% for item in extracted_data %}
            <!-- Display non-item fields -->
            {% for key, value in item.items %}
                {% if key != 'Items' %}
                    <p>{{ key }}: <span id="{{ key }}">{{ value }}</span> <input type="text" id="edit_{{ key }}" style="display: none;"></p>
                {% endif %}
            {% endfor %}
 
            <!-- Display item fields -->
            {% if item.Items %}
                <table id="editableTable">
                    <thead>
                        <tr>
                            <th>ProductCode</th>
                            <th>Barcode</th>
                            <th>Description</th>
                            <th>Quantity</th>
                            <th>UnitPrice</th>
                            <th>Unit</th>
                            <th>Tax</th>
                            <th>TaxRate</th>
                            <th>Amount</th>
                            <th>MaterialNumber</th>
                            <th>LineText</th>
                            <th>LineItemNo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Iterate over each item in Items -->
                        {% for item_data in item.Items %}
                            <tr>
                                <!-- Display values for each item field -->
                                <td>{{ item_data.ProductCode }}</td>
                                <td>{{ item_data.Barcode }}</td>
                                <td>{{ item_data.Description }}</td>
                                <td>{{ item_data.Quantity }}</td>
                                <td>{{ item_data.UnitPrice }}</td>
                                <td>{{ item_data.Unit }}</td>
                                <td>{{ item_data.Tax }}</td>
                                <td>{{ item_data.TaxRate }}</td>
                                <td>{{ item_data.Amount }}</td>
                                <td>{{ item_data.MaterialNumber }}</td>
                                <td>{{ item_data.LineText }}</td>
                                <td>{{ item_data.LineItemNo }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        {% endfor %}
    </div>
 
    <!-- Buttons -->
    <div class="button-container">
        <!-- Edit Button -->
        <button class="edit-button" onclick="toggleEdit()">Edit Data</button>
               
        <!-- Save Button -->
        <button class="save-button" onclick="saveData()" style="display: none;">Save</button>
 
        <!-- Print Button -->
        <button class="print-button" onclick="printInvoice()">Print Invoice</button>
 
        <!-- push Button -->
        <button class="sap-button" onclick="pushToSAP()">Push JSON to SAP</button>
    </div>
 
    <script>
        function printInvoice() {
            window.print();
        };
 
        // Function to toggle between display and edit mode
        function toggleEdit() {
            var spans = document.querySelectorAll('span');
            var inputs = document.querySelectorAll('input[type="text"]');
            var cells = document.querySelectorAll('#editableTable td');
 
            for (var i = 0; i < spans.length; i++) {
                spans[i].style.display = 'none';
                inputs[i].style.display = 'inline';
                inputs[i].value = spans[i].innerText;
            }
 
            for (var i = 0; i < cells.length; i++) {
                cells[i].setAttribute('contenteditable', true);
            }
 
            // Show the Save button
            document.querySelector('.save-button').style.display = 'block';
 
            // Show the hidden fields
            var hiddenFields = document.querySelectorAll('.hidden-field');
            for (var i = 0; i < hiddenFields.length; i++) {
                hiddenFields[i].style.display = 'block';
            }
        }
 
        // Function to save the edited data
        function saveData() {
            var spans = document.querySelectorAll('span');
            var inputs = document.querySelectorAll('input[type="text"]');
            var cells = document.querySelectorAll('#editableTable td');
 
            // Check if any fields have been edited
            var edited = false;
            for (var i = 0; i < inputs.length; i++) {
                if (inputs[i].value !== spans[i].innerText) {
                    edited = true;
                    break;
                }
            }
 
            if (edited) {
                // If any fields have been edited, save the edited data
                for (var i = 0; i < inputs.length; i++) {
                    var span = inputs[i].previousElementSibling;
                    span.innerText = inputs[i].value;
                    inputs[i].style.display = 'none';
                    span.style.display = 'inline';
                }
 
                // Set contenteditable to false for all table cells
                for (var i = 0; i < cells.length; i++) {
                    cells[i].setAttribute('contenteditable', false);
                }
               
                // Toggle back to non-editable mode for non-table elements
                var spans = document.querySelectorAll('span');
                var inputs = document.querySelectorAll('input[type="text"]');
                for (var i = 0; i < spans.length; i++) {
                    spans[i].style.display = 'inline';
                    inputs[i].style.display = 'none';
                }
 
                // Hide the Save button after saving
                document.querySelector('.save-button').style.display = 'none';
 
                // Toggle back to non-editable mode
                toggleEdit();
            } else {
                // If no fields have been edited, simply save the extracted data
                // Perform the save operation here (e.g., send data to server)
                alert("Extracted data saved.");
            }
        }
 
        // Function to handle pushing JSON data to SAP
        function pushToSAP() {
            // Perform the operation to push JSON to SAP here
            // For demonstration purposes, let's assume the operation is successful
            alert("Your JSON file has been successfully pushed into SAP.");
        }
    </script>
</body>
</html>
 